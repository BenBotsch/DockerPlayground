services:
  ci-linux:
    build:
      context: .
      dockerfile: docker/linux/Dockerfile
    volumes:
      - .:/workspace
      - conan-linux:/root/.conan2
      - build-linux:/workspace/build
    working_dir: /workspace
    command: ["bash", "-lc", "bash scripts/ci-linux.sh"]

  shell:
    build:
      context: .
      dockerfile: docker/linux/Dockerfile
    volumes:
      - .:/workspace
      - conan-linux:/root/.conan2
      - build-linux:/workspace/build
    working_dir: /workspace
    tty: true
    stdin_open: true
    command: ["bash"]

volumes:
  conan-linux:
  build-linux:
